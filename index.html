<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrap Masters</title>
    <!-- Favicon & App Icons -->
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/icon/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="assets/icon/android-chrome-512x512.png">
    <link rel="apple-touch-icon" href="assets/icon/apple-touch-icon.png">
    <link rel="manifest" href="assets/icon/site.webmanifest">
    <!-- Prefer crisp 32x32 PNG on desktop -->
    <link rel="shortcut icon" type="image/png" href="assets/icon/favicon-32x32.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="themes.css">
</head>
<body>
    <!-- Settings icon (top-right) -->
    <div id="settings-container">
        <img id="settings-btn" src="assets/settings.png" alt="Settings" title="Settings">
    </div>
    <div class="version-info">Version 1.3</div>
    <div class="game-content">
        <div id="counter">Scrap: 0</div>
    <div id="brick-counter" class="hidden" style="font-size: 24px; margin-bottom: 15px; color: #e67e22;">Brick: 0</div>
    <div id="tiles-counter" class="hidden" style="font-size: 24px; margin-bottom: 15px; color: #9b59b6;">Tires: 0</div>
        <img id="scrap-image" src="assets/scrap.png" alt="Scrap">
        <div id="cooldown-container">
            <div id="cooldown-bar"></div>
            <div id="cooldown-timer">5.00</div>
        </div>
<div id="bottom-buttons">
    <div id="greenupgrade-container">
        <img id="greenupgrade-btn" src="assets/greenupgrade.png" alt="Green Upgrade">
    </div>
    <div id="book-container" class="hidden">
        <img id="book-btn" src="assets/book.png" alt="Book" title="Skills Book">
    </div>
    <div id="mysterybook-container" class="hidden">
        <img id="mysterybook-btn" src="assets/mysterybook.png" alt="Mystery Book" title="Mystery Book">
    </div>
    <div id="tree-container" class="hidden">
        <img id="tree-btn" src="assets/tree.png" alt="Skill Tree" title="Skill Tree">
    </div>
    <div id="blueupgrade-container" class="hidden">
        <img id="blueupgrade-btn" src="assets/blueupgrade.png" alt="Blue Upgrade" title="Blue Upgrades">
    </div>
    <div id="upgrade-container">
        <img id="upgrade-btn" src="assets/update.png" alt="Upgrade">
    </div>
    <div id="star-container">
        <img id="star-btn" src="assets/star.png" alt="Rebirth" title="Rebirth">
    </div>
    <div id="brick-container" class="hidden">
        <img id="brick-img" src="assets/brick.png" alt="Brick" title="Brick" style="width:32px;height:32px;vertical-align:middle;">
        <span id="brick-count">Brick: 0</span>
    </div>
</div>

    <!-- Okno upgrade'ów -->
<div id="upgrade-window" class="hidden">
    <div class="upgrade-grid">
        <div class="upgrade-item" data-index="0">
            <div class="upgrade-title">+1 Scrap/click</div>
            <div class="upgrade-level">Level: <span id="upgrade-level-0">0</span></div>
            <div class="upgrade-cost" id="upgrade-cost-0">5 Scrap</div>
        </div>
        <div class="upgrade-item hidden" data-index="1">
            <div class="upgrade-title">Autoclicker (1 Scrap/s)</div>
            <div class="upgrade-level"><span id="upgrade-level-1">0</span>/1</div>
            <div class="upgrade-cost" id="upgrade-cost-1">50 Scrap</div>
        </div>
        <div class="upgrade-item hidden" data-index="2">
            <div class="upgrade-title">-0.10 Cooldown</div>
            <div class="upgrade-level"><span id="upgrade-level-2">0</span>/30</div>
            <div class="upgrade-cost" id="upgrade-cost-2">30 Scrap</div>
        </div>
        <div class="upgrade-item hidden" data-index="3">
            <div class="upgrade-title">Funny Joke</div>
            <div class="upgrade-level"><span id="upgrade-level-3">0</span>/20</div>
            <div class="upgrade-cost" id="upgrade-cost-3">—</div>
        </div>
        <div class="upgrade-item hidden" data-index="4">
            <div class="upgrade-title">Mass Scrap</div>
            <div class="upgrade-level"><span id="upgrade-level-4">0</span>/10</div>
            <div class="upgrade-cost" id="upgrade-cost-4">—</div>
        </div>
    </div>
    <div id="close-upgrades">✕</div>
</div>

<div id="scrapyard-window" class="hidden">
    <div class="scrapyard-content">
        <!-- ScrapYard Section - Left Side -->
        <div class="scrapyard-left">
            <h3>ScrapYard</h3>
            <div class="scrapyard-description">
                ScrapYard 100 Scrap/min<br>
                <small style="visibility: hidden;">Spacing element</small>
            </div>
            <img id="scrapyard-image" src="assets/scrapyard.png" alt="ScrapYard">
            <div id="scrapyard-cost">2000 Scrap</div>
            <button id="buy-scrapyard">Buy</button>
        </div>
        
        <!-- Vertical Separator -->
        <div id="brickyard-separator" class="hidden"></div>
        
        <!-- BrickYard Section - Right Side -->
        <div id="brickyard-section" class="hidden">
            <h3>BrickYard</h3>
            <div class="brickyard-description">
                +1 Brick<br>
                <small>Cost: 10 Scrap + 5 Master Tokens</small>
            </div>
            <img id="brickyard-image" src="assets/brickyard.png" alt="BrickYard">
            <div id="brickyard-cost">10 Scrap + 5 Master Tokens</div>
            <button id="buy-brick">Buy 1 Brick</button>
        </div>

        <!-- Vertical Separator for TilesYard -->
        <div id="tilesyard-separator" class="hidden"></div>

        <!-- TilesYard Section - Third Option -->
        <div id="tilesyard-section" class="hidden">
            <h3>TiresYard</h3>
            <div class="tilesyard-description">
                Collect more tires by picking 1<br>
                <small>(+1 Tires per 1 level, 1 level = 10 Tiers)</small>
            </div>
            <img id="tilesyard-image" src="assets/tilesyard.png" alt="TilesYard">
            <div id="tilesyard-status">Unlocked</div>
            <div id="tiles-upgrade-level">Tier: 0/10</div>
            <div id="tiles-level-label">Level: 0</div>
            <button id="tiles-upgrade-btn">Upgrade</button>
        </div>
    </div>
    <div id="close-scrapyard">✕</div>
</div>

<!-- Okno rebirth - przeniesione na zewnątrz -->
<div id="rebirth-window" class="hidden">
    <div class="rebirth-content">
    <h3>Rebirth</h3>
        <div id="rebirth-count" style="font-size:16px;color:#f1c40f;margin:6px 0 10px;">Rebirth: 0</div>
        <div class="rebirth-description">
            Rebirth resets your progress and grants a rebirth point.<br>
            Required: <span id="rebirth-cost-placeholder">...</span> Scrap<br><br>
            <strong>WARNING:</strong> This will reset all your upgrades and scrap!
        </div>
        <button id="confirm-rebirth">Rebirth</button>
    </div>
    <div id="close-rebirth">✕</div>
</div>

<!-- Funny Joke Level 2 Modal -->
<div id="funnyjoke-window" class="hidden">
    <div class="funnyjoke-content">
        <h3>Special Note</h3>
        <div id="funnyjoke-message" class="funnyjoke-message"></div>
        <button id="funnyjoke-close">Continue</button>
    </div>
    <div id="close-funnyjoke">✕</div>
    
</div>

<!-- Okno greenupgrade -->
<div id="greenupgrade-window" class="hidden">
    <div class="greenupgrade-content">
    <h3>Barrel Selector</h3>
        <div class="greenupgrade-description">
            Select a barrel to increase your Scrap production.<br>
            Each barrel has a different Scrap/click bonus.<br>
        </div>
        <div class="greenupgrade-grid">
    <div class="greenupgrade-item">
        <img src="assets/scrap.png" alt="Scrap">
        <button class="greenupgrade-button">Equip</button>
        <div class="greenupgrade-text">+0 Scrap/Click</div>
    </div>
    <div class="greenupgrade-item">
        <img src="assets/barrel1.png" alt="Barrel 1">
        <button class="greenupgrade-button">Equip</button>
        <div class="greenupgrade-text">+1 Scrap/Click</div>
    </div>
    <div class="greenupgrade-item">
        <img src="assets/barrel2.png" alt="Barrel 2">
        <button class="greenupgrade-button">Equip</button>
        <div class="greenupgrade-text">+2 Scrap/Click</div>
    </div>
    <div class="greenupgrade-item">
        <img src="assets/barrel3.png" alt="Barrel 3">
        <button class="greenupgrade-button">Equip</button>
        <div class="greenupgrade-text">+3 Scrap/Click</div>
    </div>
    <div class="greenupgrade-item">
        <img src="assets/barrel4.png" alt="Barrel 4">
        <button class="greenupgrade-button">Equip</button>
        <div class="greenupgrade-text">+4 Scrap/Click</div>
    </div>
    <div class="greenupgrade-item">
        <img src="assets/barrel5.png" alt="Barrel 5">
        <button class="greenupgrade-button">Equip</button>
        <div class="greenupgrade-text">+5 Scrap/Click</div>
    </div>
    <div class="greenupgrade-item">
        <img src="assets/Barrel6.png" alt="Barrel 6">
        <button class="greenupgrade-button">Equip</button>
        <div class="greenupgrade-text">+6 Scrap/Click</div>
    </div>
    <div class="greenupgrade-item">
        <img src="assets/Barrel7.png" alt="Barrel 7">
        <button class="greenupgrade-button">Equip</button>
        <div class="greenupgrade-text">+7 Scrap/Click</div>
    </div>
    <div class="greenupgrade-item">
        <img src="assets/Barrel8.png" alt="Barrel 8">
        <button class="greenupgrade-button">Equip</button>
        <div class="greenupgrade-text">+8 Scrap/Click</div>
    </div>
</div>
        <div id="close-greenupgrade">✕</div>
    </div>
</div>

<!-- Okno Mystery Book -->
<div id="mysterybook-window" class="hidden">
    <div class="mysterybook-content">
        <h3>Mystery Book</h3>
        <div class="mysterybook-description">
            Upgrade barrels using Master Tokens.
        </div>
        <div class="mysterybook-grid">
            <div class="mysterybook-item">
                <img src="assets/scrap.png" alt="Scrap">
                <button class="mysterybook-button" data-cost="1">Upgrade</button>
                <div class="mysterybook-level">Level: 0/5</div>
                <div class="mysterybook-cost">Cost: 1 Master Token</div>
            </div>
            <div class="mysterybook-item">
                <img src="assets/barrel1.png" alt="Barrel 1">
                <button class="mysterybook-button" data-cost="2">Upgrade</button>
                <div class="mysterybook-level">Level: 0/5</div>
                <div class="mysterybook-cost">Cost: 2 Master Token</div>
            </div>
            <div class="mysterybook-item">
                <img src="assets/barrel2.png" alt="Barrel 2">
                <button class="mysterybook-button" data-cost="4">Upgrade</button>
                <div class="mysterybook-level">Level: 0/5</div>
                <div class="mysterybook-cost">Cost: 4 Master Token</div>
            </div>
            <div class="mysterybook-item">
                <img src="assets/barrel3.png" alt="Barrel 3">
                <button class="mysterybook-button" data-cost="8">Upgrade</button>
                <div class="mysterybook-level">Level: 0/5</div>
                <div class="mysterybook-cost">Cost: 8 Master Token</div>
            </div>
            <div class="mysterybook-item">
                <img src="assets/barrel4.png" alt="Barrel 4">
                <button class="mysterybook-button" data-cost="16">Upgrade</button>
                <div class="mysterybook-level">Level: 0/5</div>
                <div class="mysterybook-cost">Cost: 16 Master Token</div>
            </div>
            <div class="mysterybook-item">
                <img src="assets/barrel5.png" alt="Barrel 5">
                <button class="mysterybook-button" data-cost="32">Upgrade</button>
                <div class="mysterybook-level">Level: 0/5</div>
                <div class="mysterybook-cost">Cost: 32 Master Token</div>
            </div>
            <div class="mysterybook-item">
                <img src="assets/Barrel6.png" alt="Barrel 6">
                <button class="mysterybook-button" data-cost="64">Upgrade</button>
                <div class="mysterybook-level">Level: 0/5</div>
                <div class="mysterybook-cost">Cost: 64 Master Token</div>
            </div>
            <div class="mysterybook-item">
                <img src="assets/Barrel7.png" alt="Barrel 7">
                <button class="mysterybook-button" data-cost="128">Upgrade</button>
                <div class="mysterybook-level">Level: 0/5</div>
                <div class="mysterybook-cost">Cost: 128 Master Token</div>
            </div>
            <div class="mysterybook-item">
                <img src="assets/Barrel8.png" alt="Barrel 8">
                <button class="mysterybook-button" data-cost="256">Upgrade</button>
                <div class="mysterybook-level">Level: 0/5</div>
                <div class="mysterybook-cost">Cost: 256 Master Token</div>
            </div>
        </div>
        <div id="master-token-display">
            <img src="assets/master.png" alt="Master Tokens">
            <div id="master-token-count">Master Tokens: 0</div>
        </div>
        <div id="close-mysterybook">✕</div>
    </div>
</div>

<!-- Okno Blue Upgrades -->
<div id="blueupgrade-window" class="hidden">
    <div class="greenupgrade-content">
    <h3>Better Upgrades</h3>
        <div class="greenupgrade-description">
            Spend Tires on permanent upgrades.
        </div>
    <div id="blueupgrade-grid">
            <!-- Better Upgrades (Blue) -->
            <div class="blueupgrade-item" id="blue-better-upgrades" style="cursor:pointer;">
                <div class="blueupgrade-title" style="font-size:16px;color:#4aa3ff;font-weight:bold;">More Scrap</div>
                <div class="blueupgrade-level" id="blue-better-level" style="font-size:14px;">Level: 0/16</div>
                <div class="blueupgrade-effect" id="blue-better-effect" style="font-size:13px;color:#ccc;">Current: x1.00 ( +0.25x / lvl )</div>
                <div class="blueupgrade-cost" id="blue-better-cost" style="font-size:13px;color:#9b59b6;">Cost: 100 Tires</div>
            </div>
                <!-- The Tires (Blue) -->
                <div class="blueupgrade-item" id="blue-tires-upgrade" style="cursor:pointer;">
                    <div class="blueupgrade-title" style="font-size:16px;color:#4aa3ff;font-weight:bold;">The Tires</div>
                    <div class="blueupgrade-level" id="blue-tires-level" style="font-size:14px;">Level: 0/30</div>
                    <div class="blueupgrade-effect" id="blue-tires-effect" style="font-size:13px;color:#ccc;">Current: x1 → x100 ( +100 / lvl )</div>
                    <div class="blueupgrade-cost" id="blue-tires-cost" style="font-size:13px;color:#9b59b6;">Cost: 35000 Tires</div>
                </div>
                <!-- The Earnings (Blue) -->
                <div class="blueupgrade-item" id="blue-earnings-upgrade" style="cursor:pointer;">
                    <div class="blueupgrade-title" style="font-size:16px;color:#4aa3ff;font-weight:bold;">The Earnings</div>
                    <div class="blueupgrade-level" id="blue-earnings-level" style="font-size:14px;">Level: 0/10</div>
                    <div class="blueupgrade-effect" id="blue-earnings-effect" style="font-size:13px;color:#ccc;">Current: +0 Scrap/click (+1000 / lvl)</div>
                    <div class="blueupgrade-cost" id="blue-earnings-cost" style="font-size:13px;color:#9b59b6;">Cost: 3000 Tires</div>
                </div>
        </div>
        <div id="close-blueupgrade">✕</div>
    </div>
    
</div>
<!-- Okno Tree -->
<div id="tree-window" class="hidden">
    <div class="tree-content">
    <h3>Skill Tree</h3>
        <div class="tree-description">
            Unlock powerful upgrades with Master Tokens!
        </div>
        <div class="tree-grid" id="tree-grid">
            <!-- Fixed slots (numeric order) -->
            <div class="tree-slot" id="slot-0"></div>
            <div class="tree-slot" id="slot-1"></div>
            <div class="tree-slot" id="slot-2"></div>
            <div class="tree-slot" id="slot-3"></div>
            <div class="tree-slot" id="slot-4"></div>
            <div class="tree-slot" id="slot-5"></div>
            <div class="tree-slot" id="slot-6"></div>
            <div class="tree-slot" id="slot-7"></div>
            <div class="tree-slot" id="slot-8"></div>

            <!-- Connection lines (SVG overlay) -->
            <svg class="tree-connections" viewBox="0 0 420 880" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
                <!-- Better Scrapyard to Tires (left) -->
                <line x1="210" y1="100" x2="70" y2="170" stroke="#333" stroke-width="4"/>
                <!-- Better Scrapyard to Best Scrapyard (right) -->
                <line x1="210" y1="100" x2="350" y2="170" stroke="#333" stroke-width="4"/>
                <!-- Tires to Blue Upgrades (center) -->
                <line x1="70" y1="210" x2="210" y2="310" stroke="#333" stroke-width="4"/>
                <!-- Best Scrapyard to Blue Upgrades (center) -->
                <line x1="350" y1="210" x2="210" y2="310" stroke="#333" stroke-width="4"/>
                <!-- Tires to TiresYard (right dashed) -->
                <line x1="70" y1="210" x2="350" y2="310" stroke="#333" stroke-width="4" stroke-dasharray="12 10"/>
                <!-- Blue Upgrades to Storm (vertical) -->
                <line x1="210" y1="330" x2="210" y2="450" stroke="#333" stroke-width="4"/>
                <!-- Storm split to Brick Storm (left) -->
                <line x1="210" y1="470" x2="70" y2="600" stroke="#333" stroke-width="4"/>
                <!-- Storm split to Master Tokens Storm (right) -->
                <line x1="210" y1="470" x2="350" y2="600" stroke="#333" stroke-width="4"/>
                <!-- Brick Storm to Star Power -->
                <line x1="70" y1="610" x2="210" y2="730" stroke="#333" stroke-width="4"/>
                <!-- Master Tokens Storm to Star Power -->
                <line x1="350" y1="610" x2="210" y2="730" stroke="#333" stroke-width="4"/>
            </svg>
        </div>
        <div id="close-tree">✕</div>
    </div>
</div>

<!-- Okno informacyjne dla Tree upgrade -->
<div id="tree-info-window" class="hidden">
    <div class="tree-info-content improved-ui">
    <h3 id="tree-info-title">Better Scrapyard</h3>
        <div class="tree-info-description" id="tree-info-description">
            Upgrade your Scrapyard from 100 Scrap per minute to 100 Scrap per second!<br>
            <span style="font-size: 1.1em; color: #e67e22; font-weight: bold;">Cost: 25 Brick</span>
        </div>
        <button class="tree-info-button" id="tree-info-buy-btn" style="margin: 20px 0; padding: 12px 32px; font-size: 1.1em; background: linear-gradient(90deg,#e67e22,#f1c40f); color: #fff; border:none; border-radius:8px; box-shadow:0 2px 8px #0002; cursor:pointer;">Upgrade for 25 Brick</button>
        <div id="close-tree-info" style="position:absolute;top:12px;right:18px;font-size:1.5em;cursor:pointer;">✕</div>
    </div>
</div>

    <!-- Settings Modal (HTML only; logic in script.js) -->
    <div id="settings-window" class="hidden">
        <div class="settings-content">
            <h3>Settings</h3>
            <div id="settings-stats" class="settings-stats">
                <div class="stat"><span class="label">Now:</span> <span id="stat-now">-</span></div>
                <div class="stat"><span class="label">Session start:</span> <span id="stat-session-start">-</span></div>
                <div class="stat"><span class="label">Session time:</span> <span id="stat-session-time">-</span></div>
                <div class="stat"><span class="label">Total time:</span> <span id="stat-total-time">-</span></div>
                <div class="stat"><span class="label">First seen:</span> <span id="stat-first-seen">-</span></div>
                <div class="stat"><span class="label">Last seen:</span> <span id="stat-last-seen">-</span></div>
                <div class="stat"><span class="label">Sessions:</span> <span id="stat-sessions">-</span></div>
                <div class="stat"><span class="label">Clicks (session/total):</span> <span id="stat-clicks">0 / 0</span></div>
                <div class="stat"><span class="label">CPS (clicks per second):</span> <span id="stat-cps">0</span></div>
                <div class="stat"><span class="label">Scrap earned:</span> <span id="stat-scrap-earned">0</span></div>
                <div class="stat"><span class="label">Scrap spent:</span> <span id="stat-scrap-spent">0</span></div>
                <div class="stat"><span class="label">Session scrap:</span> <span id="stat-scrap-session">0</span></div>
                <div class="stat"><span class="label">SPS (scrap per second):</span> <span id="stat-sps">0</span></div>
                <div class="stat"><span class="label">Peak scrap:</span> <span id="stat-peak-scrap">0</span></div>
                <div class="stat"><span class="label">Best click yield:</span> <span id="stat-best-click">0</span></div>
                <div class="stat"><span class="label">Rebirths:</span> <span id="stat-rebirths">0</span></div>
                <div class="stat"><span class="label">Last rebirth:</span> <span id="stat-last-rebirth">-</span></div>
                <div class="stat"><span class="label">Bricks bought:</span> <span id="stat-bricks-bought">0</span></div>
                <div class="stat"><span class="label">Tires spawned/collected:</span> <span id="stat-tires">0 / 0</span></div>
                <div class="stat"><span class="label">Tiles earned:</span> <span id="stat-tiles-earned">0</span></div>
                <div class="stat"><span class="label">Tiles spent:</span> <span id="stat-tiles-spent">0</span></div>
                <div class="stat"><span class="label">Autoclicks:</span> <span id="stat-autoclicks">0</span></div>
                <div class="stat"><span class="label">Autoclicks (session):</span> <span id="stat-autoclicks-session">0</span></div>
                <div class="stat"><span class="label">Scrapyard ticks:</span> <span id="stat-scrapyard-ticks">0</span></div>
                <div class="stat"><span class="label">Scrapyard runtime:</span> <span id="stat-scrapyard-uptime">0</span></div>
                <div class="stat"><span class="label">Storms:</span> <span id="stat-storms">0</span></div>
                <div class="stat"><span class="label">Upgrades bought:</span> <span id="stat-upgrades-bought">0</span></div>
                <div class="stat"><span class="label">Blue upgrades (b/e/t):</span> <span id="stat-blue-bought">0</span></div>
                <div class="stat"><span class="label">Master Tokens spent:</span> <span id="stat-tokens-spent">0</span></div>
            </div>
            <div class="settings-actions">
                <button id="export-save-btn">Export Save</button>
                <button id="import-save-btn">Import Save</button>
                <input type="file" id="import-save-input" accept="application/json" class="hidden" />
            </div>
            <img id="settings-palette" src="assets/pallet.png" alt="Palette">
            <div id="settings-theme-label">Theme: <span id="settings-theme-name">Dark</span></div>
            <div id="close-settings">✕</div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <!-- Cache bust for save system -->
    <script src="savescript.js?v=1.4.1"></script>
    <script src="admincommands.js"></script>
    <!-- Storm Timer (appears after Storm upgrade purchased) -->
    <div id="storm-timer" style="position:fixed;left:12px;bottom:10px;font-family:monospace;font-size:18px;background:rgba(0,0,0,0.45);color:#fff;padding:4px 10px;border-radius:6px;display:none;z-index:5000;">04:00</div>
</body>
</html>
